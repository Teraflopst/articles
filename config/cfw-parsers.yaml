## å‚è€ƒ
## https://github.com/iczrac/Parsers-for-clash/tree/main
## https://github.com/ACL4SSR/ACL4SSR/tree/master
## https://docs.gtk.pw/contents/parser.html

parsers: # array
  # - reg: ^.*$ #åŒ¹é…æ‰€æœ‰è®¢é˜…ï¼Œ
  # æˆ– - url: https://example.com/profile.yaml æŒ‡å®šè®¢é˜…
  # - reg: ^https://dy\.xfltd\.cc/.+$ # æ­£åˆ™åŒ¹é…åŸŸå
  - reg: ^https://service.+$ # æ­£åˆ™åŒ¹é…åŸŸå
    
    # ä¸‹é¢æ˜¯åˆ é™¤æœåŠ¡å•†è‡ªå¸¦çš„ç­–ç•¥ç»„å’Œè§„åˆ™
    code: |
      module.exports.parse = (raw, { yaml }) => {
        const rawObj = yaml.parse(raw)
        const groups = []
        const rules = []
        return yaml.stringify({ ...rawObj, 'proxy-groups': groups, rules })
      }
    
    # ç­–ç•¥å’Œè§„åˆ™
    yaml:
      prepend-rules: # è§„åˆ™ç”±ä¸Šå¾€ä¸‹éå†ï¼Œå¦‚ä¸Šé¢è§„åˆ™å·²ç»å‘½ä¸­ï¼Œåˆ™ä¸å†å¾€ä¸‹å¤„ç†
        - PROCESS-NAME,cloudmusic.exe,DIRECT
        - PROCESS-NAME,aDrive.exe,DIRECT
        - PROCESS-NAME,baidunetdisk.exe,DIRECT
        - PROCESS-NAME,baidunetdiskhost.exe,DIRECT
        - PROCESS-NAME,NutstoreClient.exe,DIRECT
        - PROCESS-NAME,Thunder.exe,DIRECT
        - PROCESS-NAME,aria2c.exe,DIRECT
        - PROCESS-NAME,fdm.exe,DIRECT
        - PROCESS-NAME,Folx.exe,DIRECT
        - PROCESS-NAME,NetTransport.exe,DIRECT
        - PROCESS-NAME,Transmission.exe,DIRECT
        - PROCESS-NAME,uTorrent.exe,DIRECT
        - PROCESS-NAME,WebTorrent.exe,DIRECT
        - PROCESS-NAME,WebTorrent Helper.exe,DIRECT
        - PROCESS-NAME,qbittorrent.exe,DIRECT
        - DOMAIN-SUFFIX,smtp,DIRECT
        - DOMAIN-KEYWORD,aria2,DIRECT
        - PROCESS-NAME,DownloadService.exe,DIRECT
        - PROCESS-NAME,Weiyun.exe,DIRECT

        # Dmm by ACL4SSR
        - DOMAIN-SUFFIX,akabeesoft2.com,IPæ—¥æœ¬
        - DOMAIN-SUFFIX,akabeesoft3.com,IPæ—¥æœ¬
        - DOMAIN-SUFFIX,akatsukiworks.com,IPæ—¥æœ¬
        - DOMAIN-SUFFIX,alicesoft.com,IPæ—¥æœ¬
        - DOMAIN-SUFFIX,cosmiccute.com,IPæ—¥æœ¬
        - DOMAIN-SUFFIX,ddo.jp,IPæ—¥æœ¬
        - DOMAIN-SUFFIX,dmm-extension.com,IPæ—¥æœ¬
        - DOMAIN-SUFFIX,dmm.co.jp,IPæ—¥æœ¬
        - DOMAIN-SUFFIX,dmm.com,IPæ—¥æœ¬
        - DOMAIN-SUFFIX,dmm.hk,IPæ—¥æœ¬
        - DOMAIN-SUFFIX,hibiki-site.com,IPæ—¥æœ¬
        - DOMAIN-SUFFIX,minori.ph,IPæ—¥æœ¬
        - DOMAIN-SUFFIX,tenco.cc,IPæ—¥æœ¬
        - DOMAIN-SUFFIX,wheel-soft.com,IPæ—¥æœ¬

        - RULE-SET,Apple,Apple
        - RULE-SET,Bing,Bing
        - RULE-SET,OneDrive,OneDrive
        - RULE-SET,Microsoft,Microsoft
        - RULE-SET,GoogleFCM,è°·æ­ŒFCM
        - RULE-SET,Epic,æ¸¸æˆå¹³å°
        - RULE-SET,Origin,æ¸¸æˆå¹³å°
        - RULE-SET,Sony,æ¸¸æˆå¹³å°
        - RULE-SET,Steam,æ¸¸æˆå¹³å°
        - RULE-SET,Nintendo,æ¸¸æˆå¹³å°
        - RULE-SET,Xbox,æ¸¸æˆå¹³å°
        - RULE-SET,GameDownload,æ¸¸æˆå¹³å°
        - RULE-SET,ProxyMedia,å›½å¤–åª’ä½“
        - RULE-SET,ChinaMedia,å›½å†…åª’ä½“
        - RULE-SET,LocalAreaNetwork,ç›´è¿è§„åˆ™
        - RULE-SET,UnBan,ç›´è¿è§„åˆ™
        - RULE-SET,ChinaDomain,ç›´è¿è§„åˆ™
        - RULE-SET,ChinaCompanyIp,ç›´è¿è§„åˆ™
        - RULE-SET,ProxyLite,æ‰‹åŠ¨åˆ‡æ¢
        - GEOIP,CN,DIRECT
        - MATCH,FINAL
      prepend-proxy-groups:
        - name: IPæ—¥æœ¬
          type: select
          proxies:
            - ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨
            - DIRECT
        - name: æ‰‹åŠ¨åˆ‡æ¢
          type: select
        - name: Apple
          type: select
          proxies:
            - DIRECT
            - æ‰‹åŠ¨åˆ‡æ¢
        - name: Bing
          type: select
          proxies:
            - DIRECT
            - æ‰‹åŠ¨åˆ‡æ¢
        - name: OneDrive
          type: select
          proxies:
            - DIRECT
            - æ‰‹åŠ¨åˆ‡æ¢
        - name: Microsoft
          type: select
          proxies:
            - DIRECT
            - æ‰‹åŠ¨åˆ‡æ¢
        - name: è°·æ­ŒFCM
          type: select
          proxies:
            - æ‰‹åŠ¨åˆ‡æ¢
            - DIRECT
        - name: æ¸¸æˆå¹³å°
          type: select
          proxies:
            - DIRECT
            - æ‰‹åŠ¨åˆ‡æ¢
        - name: å›½å†…åª’ä½“
          type: select
          proxies:
            - DIRECT
            - æ‰‹åŠ¨åˆ‡æ¢
        - name: å›½å¤–åª’ä½“
          type: select
          proxies:
            - æ‰‹åŠ¨åˆ‡æ¢
            - DIRECT
        - name: ç›´è¿è§„åˆ™
          type: select
          proxies:
            - DIRECT
            - æ‰‹åŠ¨åˆ‡æ¢
        - name: FINAL
          type: select
          proxies:
            - DIRECT
            - æ‰‹åŠ¨åˆ‡æ¢

        - name: ğŸŒ å…¨éƒ¨è‡ªåŠ¨
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 300
        - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 300
        - name: ğŸ‡ºğŸ‡¸ ç¾å›½è‡ªåŠ¨
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 300
        - name: ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 300
        - name: ğŸ‡¸ğŸ‡¬ ç‹®åŸè‡ªåŠ¨
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 300
        - name: ğŸ‡ºğŸ‡³ å…¶ä½™è‡ªåŠ¨
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 300
      commands:
        - proxy-groups.(ğŸŒ å…¨éƒ¨è‡ªåŠ¨).proxies=[]proxyNames
        - proxy-groups.(ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨).proxies=[]proxyNames|(æ—¥æœ¬|ğŸ‡¯ğŸ‡µ)
        - proxy-groups.(ğŸ‡ºğŸ‡¸ ç¾å›½è‡ªåŠ¨).proxies=[]proxyNames|(ç¾å›½|ğŸ‡ºğŸ‡¸)
        - proxy-groups.(ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨).proxies=[]proxyNames|(é¦™æ¸¯|ğŸ‡­ğŸ‡°)
        - proxy-groups.(ğŸ‡¸ğŸ‡¬ ç‹®åŸè‡ªåŠ¨).proxies=[]proxyNames|(æ–°åŠ å¡|ğŸ‡¸ğŸ‡¬)
        - proxy-groups.(ğŸ‡ºğŸ‡³ å…¶ä½™è‡ªåŠ¨).proxies=[]proxyNames|^[^é¦™æ—¥å°æ–°éŸ©ç¾]*$ # æ’é™¤èŠ‚ç‚¹åå­—æœ‰â€œé¦™æ—¥å°æ–°éŸ©ç¾â€çš„èŠ‚ç‚¹
        #åˆ†éš”çº¿
        - proxy-groups.(æ‰‹åŠ¨åˆ‡æ¢).proxies=[]groupNames|(è‡ªåŠ¨)
        - proxy-groups.(æ‰‹åŠ¨åˆ‡æ¢).proxies.0+DIRECT
        - proxy-groups.(æ¸¸æˆå¹³å°).proxies.99+[]groupNames|(è‡ªåŠ¨)
        - proxy-groups.(å›½å†…åª’ä½“).proxies.99+[]groupNames|(è‡ªåŠ¨)
        - proxy-groups.(å›½å¤–åª’ä½“).proxies.99+[]groupNames|(è‡ªåŠ¨)
        # æ·»åŠ è§„åˆ™é›†
      mix-rule-providers:
        Apple:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Apple.yaml"
          path: ./ruleset/Apple.yaml
          interval: 86400
        Bing:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/Bing.yaml"
          path: ./ruleset/Bing.yaml
          interval: 86400
        OneDrive:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/OneDrive.yaml"
          path: ./ruleset/OneDrive.yaml
          interval: 86400
        Microsoft:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/Microsoft.yaml"
          path: ./ruleset/Microsoft.yaml
          interval: 86400
        GoogleFCM:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/GoogleFCM.yaml"
          path: ./ruleset/GoogleFCM.yaml
          interval: 86400

        ChinaMedia: # å›½å†…åª’ä½“
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/ChinaMedia.yaml"
          path: ./ruleset/ChinaMedia.yaml
          interval: 86400
        ProxyMedia: # å›½å¤–åª’ä½“
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/ProxyMedia.yaml"
          path: ./ruleset/ProxyMedia.yaml
          interval: 86400

        Epic: # æ¸¸æˆ
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/Epic.yaml"
          path: ./ruleset/Epic.yaml
          interval: 86400
        Origin: # æ¸¸æˆ
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/Origin.yaml"
          path: ./ruleset/Origin.yaml
          interval: 86400
        Sony: # æ¸¸æˆ
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/Sony.yaml"
          path: ./ruleset/Sony.yaml
          interval: 86400
        Steam: # æ¸¸æˆ
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/Steam.yaml"
          path: ./ruleset/Steam.yaml
          interval: 86400
        Nintendo: # æ¸¸æˆ
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/Nintendo.yaml"
          path: ./ruleset/Nintendo.yaml
          interval: 86400
        Xbox: # æ¸¸æˆ
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/Xbox.yaml"
          path: ./ruleset/Xbox.yaml
          interval: 86400
        GameDownload: # æ¸¸æˆ
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/GameDownload.yaml"
          path: ./ruleset/GameDownload.yaml
          interval: 86400

        # ä»£ç†è§„åˆ™
        ProxyLite: #æ¯”è¾ƒç²¾ç®€çš„ä»£ç†åˆ—è¡¨ï¼ŒåŒ…å«å¸¸ç”¨çš„ï¼Œä»¥åŠè¢«æ±¡æŸ“çš„åŸŸåã€‚ProxyGFWlist åˆ™åŒ…å«GFWçš„å…¨é‡åˆ—è¡¨
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/ProxyLite.yaml"
          path: ./ruleset/ProxyLite.yaml
          interval: 86400

        # ä»¥ä¸‹ä¸ºä¸€äº›ç›´è¿è§„åˆ™
        LocalAreaNetwork:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/LocalAreaNetwork.yaml"
          path: ./ruleset/LocalAreaNetwork.yaml
          interval: 86400
        UnBan:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/UnBan.yaml"
          path: ./ruleset/UnBan.yaml
          interval: 86400
        ChinaDomain:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/ChinaDomain.yaml"
          path: ./ruleset/ChinaDomain.yaml
          interval: 86400
        ChinaCompanyIp:
          type: http
          behavior: ipcidr
          url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/ChinaCompanyIp.yaml"
          path: ./ruleset/ChinaCompanyIp.yaml
          interval: 86400
